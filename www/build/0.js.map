{"version":3,"sources":["../../src/pages/checkout-payment/checkout-payment.module.ts","../../src/components/cart-progress/cart-progress.module.ts","../../src/components/cart-progress/cart-progress.ts","../../src/pages/checkout-payment/checkout-payment.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CheckoutPaymentPage } from './checkout-payment';\r\nimport { CartProgressModule } from '../../components/cart-progress/cart-progress.module';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CheckoutPaymentPage,\r\n  ],\r\n  imports: [\r\n    CartProgressModule,\r\n    IonicPageModule.forChild(CheckoutPaymentPage)\r\n  ],\r\n  entryComponents: [\r\n    CheckoutPaymentPage\r\n  ]\r\n})\r\nexport class CheckoutPaymentModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout-payment/checkout-payment.module.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CartProgress } from './cart-progress';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CartProgress,\r\n  ],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [\r\n    CartProgress\r\n  ]\r\n})\r\nexport class CartProgressModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/cart-progress/cart-progress.module.ts","import { Component, Input, NgModule } from '@angular/core';\r\nimport { Button, Select } from 'ionic-angular';\r\n \r\n@Component({\r\n    selector: 'cart-progress',\r\n    templateUrl: 'cart-progress.html'\r\n})\r\nexport class CartProgress {\r\n\r\n    @Input('amount') amount: number;\r\n    @Input('current') current: number;\r\n\r\n    private elements: string[] = [\r\n        \"DÃ©tails\",\r\n        \"Paiement\",\r\n        \"Confirmation\" \r\n    ]\r\n\r\n    getElements(): Array<number> {\r\n        return Array.from({length: this.amount}, (x,i) => i + 1);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/cart-progress/cart-progress.ts","import {\r\n    Component\r\n} from \"@angular/core\";\r\nimport {\r\n    IonicPage,\r\n    ModalController,\r\n    NavController,\r\n    NavParams\r\n} from \"ionic-angular\";\r\nimport {\r\n    MoltinCart\r\n} from \"../../providers/moltin/models/cart\";\r\nimport { Moltin } from \"../../providers/moltin/moltin\";\r\n\r\ndeclare var Stripe: any;\r\n\r\n@IonicPage({\r\n    name: \"checkout-payment\",\r\n    segment: \"checkout-payment\"\r\n})\r\n@Component({\r\n    selector: \"page-checkout-payment\",\r\n    templateUrl: \"checkout-payment.html\"\r\n})\r\nexport class CheckoutPaymentPage {\r\n\r\n    private paymentRequest: any;\r\n    private card: any;\r\n    private canMakePayment: boolean = true;\r\n    private moltinCart: MoltinCart = this.navParams.get('cart');\r\n    private customer: {} = this.navParams.get('customer');\r\n\r\n    private selectedPaymentMethod: string = \"bancontact\";\r\n    private formIsValid: boolean = false;\r\n\r\n    private promoCode: string;\r\n\r\n    constructor(\r\n        private navController: NavController,\r\n        private navParams: NavParams,\r\n        private moltin: Moltin\r\n    ) {\r\n        this.constructPaymentRequest();\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n    }\r\n\r\n    constructPaymentRequest() {\r\n        let items = this.moltinCart.data.map(item => {\r\n            return {\r\n                \"amount\": item.meta.display_price.with_tax.value.amount,\r\n                \"label\": item.name,\r\n            }\r\n        })\r\n        this.paymentRequest = {\r\n            country: 'BE',\r\n            currency: this.moltinCart.meta.display_price.with_tax.currency.toLowerCase(),\r\n            total: {\r\n                label: 'Paiement total',\r\n                amount: this.moltinCart.meta.display_price.with_tax.amount,\r\n            },\r\n            displayItems: items\r\n        };\r\n\r\n        // this.paymentRequest.on('token', (ev) => {\r\n        //     ev.complete('success');\r\n        //     this.moveToConfirmationPage(ev.token);\r\n        // });\r\n\r\n        // this.paymentRequest.on('error', (ev) => {\r\n        //     console.log(ev);\r\n        // });\r\n\r\n        // this.paymentRequest.on('cancel', (ev) => {\r\n        //     console.log(ev);\r\n        // })\r\n    }\r\n\r\n    applyPromoCode() {\r\n        this.moltin.applyPromoCode(this.promoCode).subscribe(\r\n            data => console.log(data),\r\n            error => console.error(error)\r\n        )\r\n    }\r\n\r\n    confirmOrder() {\r\n        if (this.selectedPaymentMethod == \"bancontact\") {\r\n            this.moveToConfirmationPage();\r\n        }\r\n    }\r\n\r\n    moveToConfirmationPage() {\r\n        this.navController.push('checkout-confirmation', {\r\n            'customer': this.customer\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout-payment/checkout-payment.ts"],"sourceRoot":""}